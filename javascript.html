<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  


<script>
  window.addEventListener("load", functionInit, true); 

  var listLearning = ["Learn_HTML", "Learn_CSS", "Learn_JavaScript", "Learn_SQL", "Learn_Python", "Learn_PHP", "Learn_Bootstrap5", "Learn_jQuery", "Learn_React", "Learn_JAVA", "Learn_CCPlus", "Learn_dotNETC", "Learn_Kotlin", "Learn_PostgreSQL", "Learn_TypeScript", "Learn_XML"];

  function preventFormSubmit() {
    var forms = document.querySelectorAll('form');
    for (var i = 0; i < forms.length; i++) {
      forms[i].addEventListener('submit', function(event) {
      event.preventDefault();
      });
    }
  }

  //INITIALIZE FUNCTIONS ONLOAD
  function functionInit(){
    breadcrumbController();
    getVersion();
    preventFormSubmit();
    setDisplayData()

    // FIXED: DISABLE CHALLENCE BUTTON
    document.getElementById('Challences_main').classList.add('pointer-events-none');
    document.getElementById('scroll-to-top').style.display = 'none';
  };

  function getVersion() {
    google.script.run.withSuccessHandler(function(getApplicationVersion) {
      document.getElementById("appVersion").innerHTML = getApplicationVersion;
    }).getAppVersion();
  }

  function setDisplayData() {
    var name = getUserProfileInfo().userName.split(" ")
     
    document.getElementById('email_display').textContent = getUserProfileInfo().userEmail;
    document.getElementById('name_display').textContent = name[0];
  }

  function getUserProfileInfo() {
    return JSON.parse(localStorage.getItem('profileinfo'))
  }

  function handleLogout() {
    $('#spinnerModal').modal('show');
    google.script.run.withSuccessHandler(outputLogout).logout();
  }

  function outputLogout(res) {
    localStorage.removeItem('profileinfo');
    document.getElementById("logoutbtn").click();
  }

  function handleBreadcrumb() {
    document.getElementById("breadcrumb_sec2").click();
  }

  function handleHome() {
    document.getElementById("breadcrumb_sec1").click();
  }

  function isNullOrUndefined(value) {
    return value === undefined || value === null;
  }
  
  function breadcrumbController() {
    google.script.url.getLocation(function(location) {
      var page = location.parameter.page;
      var name = location.parameter.name;

      if(page == "main" || page == undefined){
        setBreadcrumbSectionI("main");
      }
      else if(!isNullOrUndefined(page) && isNullOrUndefined(name)) {
        setBreadcrumbSectionII(page)
      }
      else if(!isNullOrUndefined(page) && !isNullOrUndefined(name)) {
        setBreadcrumbSectionIII(page, name)
      }
    });
  }

  function getPageName(pageName){
    switch(pageName){
      case 'main':
        return "Dashboard";
      case 'home':
        return "Home";
      case 'Learn_main':
        return "Learning";
      case 'Learn_HTML':
        return "HTML";
      case 'Learn_CSS':
        return "CSS";
      case 'Learn_JavaScript':
        return "JavaScript";
      case 'Learn_SQL':
        return "SQL";
      case 'Learn_Python':
        return "Python";
      case 'Learn_PHP':
        return "PHP";
      case 'Learn_Bootstrap5':
        return "Bootsrap5";
      case 'Learn_jQuery':
        return "JQuery";
      case 'Learn_React':
        return "React";
      case 'Learn_JAVA':
        return "JAVA";
      case 'Learn_CCPlus':
        return "C, C++";
      case 'Learn_dotNETC':
        return ".NET C#";
      case 'Learn_Kotlin':
        return "Kotlin";
      case 'Learn_PostgreSQL':
        return "PostgreSQL";
      case 'Learn_TypeScript':
        return "TypeScript";
      case 'Learn_XML':
        return "XML";
      case 'Quiz_main':
        return "Quiz";
      case 'Quiz_test':
        return "Quiz";
      case 'Challences_main':
        return "Challences";
      case 'SummaryScore_main':
        return "Summary Score";
      case 'ATSSupport_main':
        return "ATS Code Ranking Support";
      default: return;      
    }
  }

  function setBreadcrumbSectionI(page) {
    document.getElementById("breadcrumb_sec1_title").innerHTML = getPageName(page);
    document.getElementById("breadcrumb_sec1_title").classList.remove('underline');
    document.getElementById("breadcrumb_sec1_title").classList.remove('hover:decoration-[#b42e34]');
    document.getElementById("breadcrumb_sec1_title").classList.remove('hover:text-[#b42e34]');
    document.getElementById("breadcrumb_sec1_title").disabled = true;
    document.getElementById('active_dashboard').classList.add('active');
  }

  function setBreadcrumbSectionII(page) {
    document.getElementById("breadcrumb_sec1_title").innerHTML = getPageName('home');
    document.getElementById("breadcrumb_sec2_title").innerHTML = getPageName(page);
    document.getElementById("breadcrumb_sec2_title").hidden = false
    document.getElementById("breadcrumb_sec2_title").classList.remove('underline');
    document.getElementById("breadcrumb_sec2_title").classList.remove('hover:decoration-[#b42e34]');
    document.getElementById("breadcrumb_sec2_title").classList.remove('hover:text-[#b42e34]');
    document.getElementById("breadcrumb_sec2_title").disabled = true;
    document.getElementById("breadcrumb_sec1_arrow").hidden = false
    document.getElementById(page).classList.add('active');
  }

  function setBreadcrumbSectionIII(page, name) {
    document.getElementById("breadcrumb_sec1_title").innerHTML = getPageName('home');
    if(listLearning.includes(page)){
      document.getElementById("breadcrumb_sec2_title").innerHTML = getPageName("Learn_main");
    }
    else {
      document.getElementById("breadcrumb_sec2_title").innerHTML = getPageName(page);
    }
    document.getElementById("breadcrumb_sec2_title").hidden = false
    document.getElementById("breadcrumb_sec3_title").innerHTML = getPageName(name);
    document.getElementById("breadcrumb_sec3_title").hidden = false
    document.getElementById("breadcrumb_sec3_title").disabled = true;
    document.getElementById("breadcrumb_sec3_title").classList.remove('underline');
    document.getElementById("breadcrumb_sec3_title").classList.remove('hover:decoration-[#b42e34]');
    document.getElementById("breadcrumb_sec3_title").classList.remove('hover:text-[#b42e34]');
    document.getElementById("breadcrumb_sec1_arrow").hidden = false
    document.getElementById("breadcrumb_sec2_arrow").hidden = false
    document.getElementById(page).classList.add('active');
  }

  function getSourcesDataForm() {
    google.script.url.getLocation(function(location) {
      var page = location.parameter.page;
      var name = location.parameter.name;

      var iframe = document.getElementById('formGoogleService');

      switch(name) {
        case 'Learn_HTML':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSdspGVb0JPbvn-EXx6wqdS3FHfhQw87ZDjA8A2M3D6BEcJtDA/viewform?embedded=true";
        case 'Learn_CSS':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSfLPeHSRP-lyVNpF1-p1Bm-Mr9MDp6Lt19I1yi12JLg-MERfQ/viewform?embedded=true";
        case 'Learn_JavaScript':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLScbZ7XeyzYMutZw8pkHnEwJZh91XUhxpjApF6ciMbTPgzdaJA/viewform?embedded=true";
        case 'Learn_SQL':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSe_wnvbtb_H77nD1fgrOUOZ9SqUhnn6RfBWXTGTiJMFiU163g/viewform?embedded=true";
        case 'Learn_Python':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLScBlO9GvjERSc1RhH24sMyv3ScEfxuBpPTnioI8a7hGvqSLQg/viewform?embedded=true";
        case 'Learn_PHP':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSfR14EGInqZ4DyYUhtUUtQ8YRq2qOMmoJtn75qMN3x2uhi5cA/viewform?embedded=true";
        case 'Learn_Bootstrap5':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSfK8ifgin7DA1aC2t3TcdlJLURdWemcOcMbiS7gk0I7aijdgg/viewform?embedded=true";
        case 'Learn_jQuery':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSdTmRpXFaEGtB-Iw_2oO9wzo00iNV6nmxbmYDZZgeiBGvRKYQ/viewform?embedded=true";
        case 'Learn_React':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSdfBYsOr9MW84FFk5u0PgpuL0xU00tRI4-zMVER4RZK3EBUPA/viewform?embedded=true";
        case 'Learn_JAVA':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSc8XrcBEPAfYlgtubC0fPX3RKqBcIU1Mr-jYxMJIkhKjbVAfQ/viewform?embedded=true";
        case 'Learn_CCPlus':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSdF4uRI6NUSqT65mCD1dwBHKF4zLcU5B38oZykyn735Y2yc1w/viewform?embedded=true";
        case 'Learn_dotNETC':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSdnxOzTQ1gSaaluWpzFIcEszKilKgPK6kkegteR8O73FMoUkA/viewform?embedded=true";
        case 'Learn_Kotlin':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSf5iMiDAHQn6Jtg5ZO7pJljlkXTvs-CGJIw4w5Ltr8tuB1Q4A/viewform?embedded=true";
        case 'Learn_PostgreSQL':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSc3qVchqioR9M1CeXhT5BZYJLb8DYzEskvsQI2dMXmCMkXSIw/viewform?embedded=true";
        case 'Learn_TypeScript':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLSeFMNSUF13wG_vFF0_pD0FNLTJZQmK8rYJAEF1Bu6dI4JeVRg/viewform?embedded=true";
        case 'Learn_XML':
          return iframe.src = "https://docs.google.com/forms/d/e/1FAIpQLScyTcDljrJBpOKk8M8o1AuqxvvV2TD7GvwVIdBSPSsc4afBFw/viewform?embedded=true";
        default: return;
      }

    });
  }

  
  window.addEventListener('scroll', () => {
    if (window.pageYOffset > 100) {
      document.getElementById('scroll-to-top').style.display = 'block';
    } else {
      document.getElementById('scroll-to-top').style.display = 'none';
    }
  });

  function scrollToTop() {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  } 


</script>

<script>
  $(document).ready(function() {
    // start: Sidebar
    $('.sidebar-dropdown-menu').slideUp('fast')

    $('.sidebar-menu-item.has-dropdown > a, .sidebar-dropdown-menu-item.has-dropdown > a').click(function(e) {
        e.preventDefault()

        if(!($(this).parent().hasClass('focused'))) {
            $(this).parent().parent().find('.sidebar-dropdown-menu').slideUp('fast')
            $(this).parent().parent().find('.has-dropdown').removeClass('focused')
        }

        $(this).next().slideToggle('fast')
        $(this).parent().toggleClass('focused')
    })

    $('.sidebar-toggle').click(function() {
        $('.sidebar').toggleClass('collapsed')

        $('.sidebar.collapsed').mouseleave(function() {
            $('.sidebar-dropdown-menu').slideUp('fast')
            $('.sidebar-menu-item.has-dropdown, .sidebar-dropdown-menu-item.has-dropdown').removeClass('focused')
        })
    })

    $('.sidebar-overlay').click(function() {
        $('.sidebar').addClass('collapsed')

        $('.sidebar-dropdown-menu').slideUp('fast')
        $('.sidebar-menu-item.has-dropdown, .sidebar-dropdown-menu-item.has-dropdown').removeClass('focused')
    })

    if(window.innerWidth < 768) {
        $('.sidebar').addClass('collapsed')
    }
})
</script>